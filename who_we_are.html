<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who We Are - D-K Solutions Enhanced</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/engine@3.3.0/tsparticles.engine.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/preset-stars@3.3.0/tsparticles.preset.stars.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        /* --- Theme Variables --- */
        :root {
            --bg-primary: #f3f4f6;
            --bg-secondary: #ffffff;
            --bg-accent: #e5e7eb;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-accent: #0ea5e9;
            --border-color: rgba(0, 0, 0, 0.1);
            --gradient-start: #1e40af;
            --gradient-mid: #0d9488;
            --gradient-end: #047857;
            --glass-bg: rgba(255, 255, 255, 0.5);
            --glass-border: rgba(255, 255, 255, 0.3);
            --shadow-color: rgba(14, 165, 233, 0.15);
        }

        .dark-mode {
            --bg-primary: #0a0a23;
            --bg-secondary: #111827;
            --bg-accent: #1f2937;
            --text-primary: #e0e0ff;
            --text-secondary: #9ca3af;
            --text-accent: #38bdf8;
            --border-color: rgba(255, 255, 255, 0.1);
            --gradient-start: #2563eb;
            --gradient-mid: #14b8a6;
            --gradient-end: #059669;
            --glass-bg: rgba(31, 41, 55, 0.4);
            --glass-border: rgba(255, 255, 255, 0.15);
            --shadow-color: rgba(56, 189, 248, 0.25);
        }

        /* --- Base & Transition Styles --- */
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-primary); 
            color: var(--text-primary); 
            overflow-x: hidden; 
            transition: background-color 0.3s ease, color 0.3s ease;
            opacity: 0; /* Initially hidden for page transition */
        }
        .gradient-text { background: linear-gradient(90deg, var(--gradient-start), var(--gradient-mid), var(--gradient-end)); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .reveal-up { opacity: 0; visibility: hidden; }
        .searchable-section { transition: opacity 0.3s ease; }
        .searchable-section.is-hidden { opacity: 0.2; pointer-events: none; }
        
        
        /* --- Hero Redesign --- */
        #hero-headline .cursor {
            color: var(--text-accent);
            animation: blink 0.7s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        .value-prop-card {
            background-color: var(--glass-bg);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .value-prop-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px -5px var(--shadow-color);
        }

        /* --- Navigation & Search --- */
        #main-header { background-color: var(--bg-secondary); transition: background-color 0.3s ease, box-shadow 0.3s ease; }
        #main-header.scrolled { background-color: var(--glass-bg); -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .nav-link { position: relative; color: var(--text-primary); transition: color 0.3s ease; padding: 0.5rem 0.6rem; font-size: 0.85rem; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -2px; left: 50%; transform: translateX(-50%); background: var(--text-accent); transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .nav-link.active { color: var(--text-accent); font-weight: 600; }
        #mobile-menu { background-color: var(--bg-accent); }
        #mobile-menu .nav-link { display: block; padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color); }
        #mobile-menu .nav-link:last-child { border-bottom: none; }
        #search-input { background-color: var(--bg-accent); color: var(--text-primary); }

        /* --- Founder Card Styling --- */
        .founder-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 30px -5px rgba(0,0,0,0.07);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .founder-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px -10px var(--shadow-color);
        }
        .founder-card img {
            width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin: 0 auto 1.5rem auto;
            border: 4px solid var(--text-accent);
            box-shadow: 0 0 0 8px color-mix(in srgb, var(--text-accent) 20%, transparent);
            transition: transform 0.3s ease;
        }
        .founder-card:hover img { transform: scale(1.05); }
        .expertise-link-btn {
            background-color: var(--text-accent);
            color: var(--bg-secondary); /* Text color that contrasts with accent */
            border: 1px solid var(--text-accent);
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block; /* For proper padding and centering */
            text-decoration: none; /* Remove underline from link */
        }
        .expertise-link-btn:hover {
            background-color: color-mix(in srgb, var(--text-accent) 80%, black);
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }


        /* --- Methodology Section --- */
        .methodology-step { position: relative; padding-left: 2.5rem; padding-bottom: 2rem; border-left: 3px solid var(--border-color); }
        .methodology-step:last-child { border-left: 3px solid transparent; padding-bottom: 0; }
        .methodology-step::before { content: attr(data-step); position: absolute; left: -1.25rem; top: -0.25rem; width: 2.5rem; height: 2.5rem; background: var(--bg-primary); border: 3px solid var(--text-accent); color: var(--text-accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; transition: all 0.3s ease; }
        .methodology-step:hover::before { transform: scale(1.1); background-color: var(--text-accent); color: var(--bg-secondary); }

        /* Philosophy & Innovation Section Cards */
        .feature-card {
            background-color: var(--bg-secondary);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 8px 25px -10px var(--shadow-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px -8px var(--shadow-color);
        }
        .feature-card .lottie-container-small { width: 100px; height: 100px; margin: 0 auto 1rem auto; }


        /* Case Studies & Client Showcase Card */
        .showcase-card { background: var(--bg-secondary); border-radius: 1rem; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 8px 25px -10px var(--shadow-color); }
        .showcase-card:hover { transform: translateY(-10px); box-shadow: 0 15px 35px -10px var(--shadow-color); }
        .showcase-card img { width: 100%; height: 200px; object-fit: cover; }
        
        /* Interactive Quiz Section */
        #quiz-container { background-color: var(--bg-secondary); padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 30px -5px var(--shadow-color); }
        .quiz-option { cursor: pointer; border: 2px solid var(--border-color); padding: 1rem; border-radius: 0.75rem; transition: all 0.2s ease; }
        .quiz-option:hover { border-color: var(--text-accent); background-color: var(--bg-accent); }
        .quiz-option.selected { border-color: var(--text-accent); background-color: color-mix(in srgb, var(--text-accent) 20%, transparent); font-weight: bold; }
        #gemini-result-card { border: 2px dashed var(--border-color); }

        /* Gemini AI Customer Assistant Section */
        #gemini-customer-care-container { background-color: var(--bg-secondary); padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 30px -5px var(--shadow-color); }
        #gemini-chatbox { max-height: 300px; overflow-y: auto; padding: 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem; margin-bottom: 1rem; background-color: var(--bg-primary); }
        .chat-message { margin-bottom: 0.75rem; padding: 0.75rem; border-radius: 0.5rem; max-width: 80%; }
        .user-message { background-color: var(--text-accent); color: var(--bg-secondary); margin-left: auto; text-align: right; }
        .gemini-message { background-color: var(--bg-accent); color: var(--text-primary); margin-right: auto; }
        #gemini-care-input { border: 1px solid var(--border-color); padding: 0.75rem; border-radius: 0.5rem 0 0 0.5rem; background-color: var(--bg-primary); color: var(--text-primary); }
        #gemini-care-submit { background-color: var(--text-accent); color: var(--bg-secondary); padding: 0.75rem 1.25rem; border: none; border-radius: 0 0.5rem 0.5rem 0; font-weight: 600; cursor: pointer; transition: background-color 0.3s; }
        #gemini-care-submit:hover { background-color: color-mix(in srgb, var(--text-accent) 80%, black); }
        #lottie-gemini-thinking { width: 80px; height: 80px; margin: 1rem auto; }
        #gemini-dissatisfied-btn {
            background-color: #ef4444; /* red-500 */
            color: white; padding: 0.5rem 1rem; border-radius: 0.5rem;
            margin-top: 1rem; cursor: pointer; transition: background-color 0.3s;
            border: none;
        }
        #gemini-dissatisfied-btn:hover { background-color: #dc2626; /* red-600 */ }


        /* Floating WhatsApp Button */
        #whatsapp-float {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background-color: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 100;
            transition: transform 0.3s ease;
        }
        #whatsapp-float:hover {
            transform: scale(1.1);
            background-color: #1DAE50;
        }

        /* General Boilerplate */
        #hero #tsparticles-hero { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-primary); display: flex; justify-content: center; align-items: center; z-index: 10000; }
        .toggle-switch { position: relative; display: inline-block; width: 48px; height: 28px; }
        .toggle-switch input { display: none; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; border-radius: 28px; transition: 0.4s; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; border-radius: 50%; transition: 0.4s; }
        input:checked + .slider { background-color: var(--text-accent); }
        input:checked + .slider:before { transform: translateX(20px); }
    </style>
</head>
<body class="light-mode">

    <div id="loading-overlay"> <div class="text-center"> <div id="lottie-loading" style="width: 150px; height: 150px; margin: 0 auto;"></div> <p class="text-lg font-semibold mt-4" style="color: var(--text-primary);">Architecting Intelligence...</p> </div> </div>

    <header id="main-header" class="fixed top-0 left-0 right-0 z-40 py-3 px-6 md:px-10">
        <nav class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold gradient-text">D-K Solutions</a>
            <div class="hidden lg:flex items-center flex-grow">
                <div class="flex-grow flex justify-center items-center space-x-2">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="who_we_are.html" class="nav-link active">Who We Are</a>
                    <a href="services.html" class="nav-link">Services</a>
                    <a href="process.html" class="nav-link">Our Process</a>
                    <a href="expertise.html" class="nav-link">Expertise</a>
                    <a href="#client-showcase" class="nav-link">Our Work</a> 
                    <a href="publications.html" class="nav-link">Publications</a>
                    <a href="testimonials.html" class="nav-link">Testimonials</a>
                    <a href="contact.html" class="nav-link">Contact</a>
                </div>
                <div class="relative w-48">
                    <input type="text" id="search-input" placeholder="Search page..." class="w-full pl-8 pr-3 py-1.5 rounded-full border border-border-color text-sm focus:outline-none focus:ring-2 focus:ring-accent">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary"></i>
                </div>
                <label class="toggle-switch ml-4"><input type="checkbox" id="darkModeToggle"><span class="slider"></span></label>
            </div>
            <div class="lg:hidden flex items-center">
                <label class="toggle-switch mr-4"><input type="checkbox" id="darkModeToggleMobile"><span class="slider"></span></label>
                <button id="mobile-menu-button" class="text-text-primary focus:outline-none" aria-label="Toggle navigation menu" title="Toggle menu"><i class="fas fa-bars fa-lg"></i></button>
            </div>
        </nav>
        <div id="mobile-menu" class="lg:hidden hidden bg-secondary shadow-lg">
            <a href="index.html" class="nav-link">Home</a>
            <a href="who_we_are.html" class="nav-link active">Who We Are</a>
            <a href="services.html" class="nav-link">Services</a>
            <a href="process.html" class="nav-link">Our Process</a>
            <a href="expertise.html" class="nav-link">Expertise</a>
            <a href="#client-showcase" class="nav-link">Our Work</a>
            <a href="publications.html" class="nav-link">Publications</a>
            <a href="testimonials.html" class="nav-link">Testimonials</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </div>
    </header>

    <main>
        <!-- HERO SECTION REDESIGN -->
        <section id="hero" class="relative min-h-screen flex flex-col items-center justify-center text-center overflow-hidden p-6 md:p-10 searchable-section" data-search-index="hero welcome innovation vision code pioneers growth architects intelligence solutions ai security data">
            <div id="tsparticles-hero"></div>
            <div class="relative z-10 flex flex-col items-center">
                <div id="hero-lottie-animation" style="width: 200px; height: 200px; margin-bottom: 1rem;"></div>
                <h1 id="hero-headline" class="text-4xl md:text-6xl font-bold mb-6 text-text-primary"></h1>
                <p class="text-lg md:text-xl text-text-secondary max-w-3xl mb-12">
                    We don't just build software. We architect intelligent, secure, and scalable digital ecosystems that become the engine for your growth and the fortress for your data.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-12">
                    <div class="value-prop-card text-center reveal-up" data-reveal-delay="0.2">
                        <i class="fas fa-brain fa-2x text-accent mb-3"></i>
                        <h3 class="text-lg font-semibold mb-1">AI-Powered Analytics</h3>
                        <p class="text-sm text-text-secondary">Transform data into predictive foresight and actionable intelligence.</p>
                    </div>
                    <div class="value-prop-card text-center reveal-up" data-reveal-delay="0.4">
                        <i class="fas fa-shield-alt fa-2x text-accent mb-3"></i>
                        <h3 class="text-lg font-semibold mb-1">Fortified Security</h3>
                        <p class="text-sm text-text-secondary">Embed zero-trust, proactive defense into your digital DNA.</p>
                    </div>
                    <div class="value-prop-card text-center reveal-up" data-reveal-delay="0.6">
                        <i class="fas fa-rocket fa-2x text-accent mb-3"></i>
                        <h3 class="text-lg font-semibold mb-1">Scalable Solutions</h3>
                        <p class="text-sm text-text-secondary">Engineer cloud-native systems built for tomorrow's demand.</p>
                    </div>
                </div>
                <a href="#our-team" class="hero-cta-button bg-accent text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-opacity-80 transition duration-300">
                    Meet The Architects
                </a>
            </div>
        </section>

        <!-- OUR TEAM SECTION -->
        <section id="our-team" class="bg-primary py-20 searchable-section" data-search-index="team innovators core daniel wanjala khadija khalid austin arnold wopata architect strategy security expertise">
            <div class="container mx-auto px-6">
                 <div class="section-header text-center max-w-3xl mx-auto mb-12">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Our Core Innovators</h2>
                    <p class="text-lg text-text-secondary">Our strength is not just in our technology, but in the brilliant minds that wield it. Each leader brings a profound depth of experience, a relentless drive for excellence, and a shared vision for a smarter digital future.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-12">
                    <!-- Daniel Wanjala Card -->
                    <div class="founder-card text-center reveal-up" data-search-index="daniel wanjala architect ai visionary python django deep learning llm react devops aws econometrics big data spark kafka">
                        <img src="https://placehold.co/128x128/3B82F6/FFFFFF?text=DW" alt="Daniel Wanjala" class="mx-auto">
                        <h3 class="text-2xl font-semibold mb-1">Daniel Wanjala 👨‍💻</h3>
                        <p class="text-accent font-medium mb-4">Chief Technical Architect & AI Visionary</p>
                        <p class="text-text-secondary mb-6 text-sm">A master polyglot in the languages of machines and data, Daniel architects our technological marvels, transforming chaotic data streams into predictive intelligence.</p>
                        <div class="mt-auto">
                            <a href="expertise.html#daniel" class="expertise-link-btn">
                                Unveil Expertise <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <!-- Khadija Khalid Card -->
                    <div class="founder-card text-center reveal-up" data-reveal-delay="0.2" data-search-index="khadija khalid strategy systems analyst foresight product management ux ui agile scrum data visualization consulting intelligence">
                        <img src="https://placehold.co/128x128/EC4899/FFFFFF?text=KK" alt="Khadija Khalid" class="mx-auto">
                        <h3 class="text-2xl font-semibold mb-1">Khadija Khalid 👩‍💼</h3>
                        <p class="text-accent font-medium mb-4">Chief Strategy Officer & Systems Analyst</p>
                        <p class="text-text-secondary mb-6 text-sm">Khadija translates abstract ideas into tangible, impactful systems, aligning digital goals with efficient execution and user-centric design.</p>
                        <div class="mt-auto">
                             <a href="expertise.html#khadija" class="expertise-link-btn">
                                Unveil Expertise <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <!-- Austin Arnold Wopata Card -->
                    <div class="founder-card text-center reveal-up" data-reveal-delay="0.4" data-search-index="austin arnold wopata security ciso offensive red purple cloud zero trust forensics penetration testing grc devsecops">
                        <img src="https://placehold.co/128x128/F59E0B/FFFFFF?text=AW" alt="Austin Arnold Wopata" class="mx-auto">
                        <h3 class="text-2xl font-semibold mb-1">Austin Arnold Wopata 🛡️</h3>
                        <p class="text-accent font-medium mb-4">Chief Information Security Officer</p>
                        <p class="text-text-secondary mb-6 text-sm">Austin is the sentinel of our digital domain, weaving impenetrable security into every project, from threat hunting to resilient network architecture.</p>
                         <div class="mt-auto">
                             <a href="expertise.html#austin" class="expertise-link-btn">
                                Unveil Expertise <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- OUR CORE PHILOSOPHY SECTION -->
        <section id="our-philosophy" class="bg-secondary py-20 searchable-section" data-search-index="philosophy values integrity innovation client-centric excellence collaboration">
            <div class="container mx-auto px-6">
                <div class="section-header text-center max-w-3xl mx-auto mb-16">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Our Guiding Principles</h2>
                    <p class="text-lg text-text-secondary">More than just a tech company, we're driven by a core set of values that define our work, our relationships, and our impact on the world.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="feature-card reveal-up">
                        <div id="lottie-philosophy-innovation" class="lottie-container-small"></div>
                        <h3 class="text-xl font-semibold mb-2 text-accent">Unrelenting Innovation</h3>
                        <p class="text-text-secondary text-sm">We constantly explore, experiment, and adapt, pushing the boundaries of what's possible to deliver cutting-edge solutions.</p>
                    </div>
                    <div class="feature-card reveal-up" data-reveal-delay="0.2">
                        <div id="lottie-philosophy-client" class="lottie-container-small"></div>
                        <h3 class="text-xl font-semibold mb-2 text-accent">Client-Centric Partnership</h3>
                        <p class="text-text-secondary text-sm">Your success is our success. We immerse ourselves in your challenges and goals, becoming a true extension of your team.</p>
                    </div>
                    <div class="feature-card reveal-up" data-reveal-delay="0.4">
                         <div id="lottie-philosophy-integrity" class="lottie-container-small"></div>
                        <h3 class="text-xl font-semibold mb-2 text-accent">Unwavering Integrity</h3>
                        <p class="text-text-secondary text-sm">Transparency, honesty, and ethical practices are the bedrock of every interaction and every line of code we write.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- EXPANDED METHODOLOGY SECTION -->
        <section id="methodology" class="bg-primary py-20 searchable-section" data-search-index="methodology process discovery architecture development quality assurance security deployment support agile evolution">
            <div class="container mx-auto px-6">
                <div class="section-header text-center max-w-3xl mx-auto mb-16">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Our Blueprint for Success</h2>
                    <p class="text-lg text-text-secondary">Success isn't accidental; it's engineered. We follow a battle-tested, six-phase methodology ensuring clarity, minimizing risk, and maximizing impact. This is our covenant with you.</p>
                </div>
                <div class="max-w-3xl mx-auto">
                    <div class="methodology-step reveal-up" data-step="1">
                        <h3 class="text-2xl font-bold mb-2">Phase 1: Deep-Dive Discovery & Strategic Alignment</h3>
                        <p class="text-text-secondary">We immerse ourselves in your world: stakeholder interviews, system analysis, workflow mapping, competitive research. The goal is a shared vision and a strategic blueprint aligning technology with your core business goals.</p>
                    </div>
                    <div class="methodology-step reveal-up" data-step="2">
                        <h3 class="text-2xl font-bold mb-2">Phase 2: Architectural Design & Prototyping</h3>
                        <p class="text-text-secondary">Architects design the system's blueprint: technology stacks, data models, scalability, security frameworks. UX/UI teams build interactive prototypes for rapid feedback, ensuring an intuitive, user-centric product.</p>
                    </div>
                    <div class="methodology-step reveal-up" data-step="3">
                        <h3 class="text-2xl font-bold mb-2">Phase 3: Agile Development & Iteration</h3>
                        <p class="text-text-secondary">Our development teams work in agile sprints, delivering functional increments of the software regularly. This allows for continuous feedback, adaptability to changing requirements, and transparent progress tracking, ensuring the project stays on course and aligned with your evolving needs.</p>
                    </div>
                    <div class="methodology-step reveal-up" data-step="4">
                        <h3 class="text-2xl font-bold mb-2">Phase 4: Rigorous Quality Assurance & Security Hardening</h3>
                        <p class="text-text-secondary">Comprehensive testing is integral. We conduct functional, performance, usability, and security testing (including penetration tests) at every stage. Our dedicated QA engineers and security experts ensure the solution is robust, reliable, and fortified against threats.</p>
                    </div>
                    <div class="methodology-step reveal-up" data-step="5">
                        <h3 class="text-2xl font-bold mb-2">Phase 5: Seamless Deployment & Go-Live</h3>
                        <p class="text-text-secondary">We manage the deployment process meticulously, whether to cloud environments or on-premise infrastructure. This includes data migration, final system checks, and user training. Our goal is a smooth transition with minimal disruption to your operations.</p>
                    </div>
                    <div class="methodology-step reveal-up" data-step="6">
                        <h3 class="text-2xl font-bold mb-2">Phase 6: Continuous Monitoring, Support & Evolution</h3>
                        <p class="text-text-secondary">Our partnership doesn't end at launch. We provide ongoing support, monitor system performance, and offer proactive maintenance. We also work with you to plan future enhancements and scale the solution as your business grows, ensuring long-term value and success.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- COMMITMENT TO INNOVATION SECTION -->
        <section id="innovation-commitment" class="bg-secondary py-20 searchable-section" data-search-index="innovation research development future technology ai machine learning emerging tech continuous learning">
            <div class="container mx-auto px-6">
                <div class="section-header text-center max-w-3xl mx-auto mb-16">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Pioneering the Future</h2>
                    <p class="text-lg text-text-secondary">Innovation is in our DNA. We are passionately curious, dedicated to research and development, and always exploring emerging technologies to bring you solutions that are not just current, but future-proof.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="feature-card reveal-up">
                        <div id="lottie-innovation-rd" class="lottie-container-small"></div>
                        <h3 class="text-xl font-semibold mb-2 text-accent">Dedicated R&D</h3>
                        <p class="text-text-secondary text-sm">Investing time and resources to explore next-gen AI, quantum resistant cryptography, and decentralized systems.</p>
                    </div>
                    <div class="feature-card reveal-up" data-reveal-delay="0.2">
                         <div id="lottie-innovation-learning" class="lottie-container-small"></div>
                        <h3 class="text-xl font-semibold mb-2 text-accent">Continuous Learning</h3>
                        <p class="text-text-secondary text-sm">Our team actively participates in global tech summits, contributes to open-source, and fosters a culture of lifelong learning.</p>
                    </div>
                    <div class="feature-card reveal-up" data-reveal-delay="0.4">
                        <div id="lottie-innovation-labs" class="lottie-container-small"></div>
                        <h3 class="text-xl font-semibold mb-2 text-accent">Innovation Labs</h3>
                        <p class="text-text-secondary text-sm">Internal sandboxes where we experiment with proof-of-concepts for bleeding-edge technologies before they hit mainstream.</p>
                    </div>
                </div>
            </div>
        </section>


        <!-- INTERACTIVE QUIZ SECTION -->
        <section id="interactive-quiz" class="bg-primary py-20 searchable-section" data-search-index="quiz interactive solution forge gemini ai sector service objective challenge outcome">
            <div class="container mx-auto px-6">
                 <div class="section-header text-center max-w-3xl mx-auto mb-12">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Forge Your Solution Path</h2>
                    <p class="text-lg text-text-secondary">Unsure where to begin or what service might suit you best? Answer a few simple questions, and our AI-powered strategic assistant will suggest a preliminary direction and potential solutions tailored to your real-world needs.</p>
                </div>
                <div id="quiz-container" class="max-w-3xl mx-auto">
                    <div id="quiz-questions">
                        <!-- Questions will be injected here by JS -->
                    </div>
                    <div id="gemini-result-container" class="hidden mt-8">
                        <h3 class="text-2xl font-bold text-center mb-4">Your Custom Solution Suggestion:</h3>
                        <div id="gemini-result-card" class="p-6 rounded-lg bg-primary">
                            <div id="gemini-spinner" class="text-center py-8">
                                <i class="fas fa-spinner fa-spin fa-3x text-accent"></i>
                                <p class="mt-4 text-text-secondary font-semibold">Analyzing your needs and consulting the digital ether...</p>
                            </div>
                            <div id="gemini-content" class="hidden">
                                <!-- Gemini's response will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: GEMINI AI CUSTOMER ASSISTANT -->
        <section id="gemini-customer-care" class="bg-secondary py-20 searchable-section" data-search-index="gemini ai assistant customer care support help contact questions">
            <div class="container mx-auto px-6">
                <div class="section-header text-center max-w-3xl mx-auto mb-12">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Need Help? Ask Our AI Assistant!</h2>
                    <p class="text-lg text-text-secondary">Have a quick question? Our AI assistant, powered by Gemini technology, is here to provide initial guidance. For complex inquiries, it can help direct you to the right human expert.</p>
                </div>
                <div id="gemini-customer-care-container" class="max-w-2xl mx-auto">
                    <div id="lottie-gemini-avatar" style="width:120px; height:120px; margin: 0 auto -20px auto; z-index:10; position:relative;"></div>
                    <div id="gemini-chatbox">
                        <div class="chat-message gemini-message">Hello! I'm D-K Solutions' AI Assistant. How can I help you today?</div>
                    </div>
                    <div id="lottie-gemini-thinking" class="hidden"></div>
                    <div class="flex">
                        <input type="text" id="gemini-care-input" class="flex-grow" placeholder="Type your question here...">
                        <button id="gemini-care-submit">Send <i class="fas fa-paper-plane ml-2"></i></button>
                    </div>
                    <div id="gemini-care-feedback" class="text-center mt-4"></div>
                </div>
            </div>
        </section>

        <!-- CLIENT SUCCESS SHOWCASE (Placeholder) -->
        <section id="client-showcase" class="bg-primary py-20 searchable-section" data-search-index="client success showcase case studies work portfolio results impact">
            <div class="container mx-auto px-6">
                <div class="section-header text-center max-w-3xl mx-auto mb-16">
                    <h2 class="gradient-text inline-block text-3xl md:text-4xl font-bold mb-4">Driving Real-World Impact</h2>
                    <p class="text-lg text-text-secondary">We're proud of the partnerships we've built and the tangible results we've delivered for our clients across various industries. Here are a few snapshots of our work.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="showcase-card reveal-up">
                        <img src="https://placehold.co/600x400/1E40AF/FFFFFF?text=Project+Alpha" alt="Project Alpha">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">Project Alpha: Enterprise AI</h3>
                            <p class="text-text-secondary text-sm mb-4">Revolutionized data analytics for a leading finance firm, improving predictive accuracy by 40%.</p>
                            <a href="contact.html" class="font-semibold text-accent hover:underline">Learn More <i class="fas fa-angle-right ml-1"></i></a>
                        </div>
                    </div>
                    <div class="showcase-card reveal-up" data-reveal-delay="0.2">
                        <img src="https://placehold.co/600x400/0D9488/FFFFFF?text=Startup+Ignite" alt="Startup Ignite">
                         <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">Startup Ignite: Mobile Platform</h3>
                            <p class="text-text-secondary text-sm mb-4">Built a scalable mobile-first platform for a fast-growing e-commerce startup, supporting 1M+ users.</p>
                            <a href="contact.html" class="font-semibold text-accent hover:underline">Learn More <i class="fas fa-angle-right ml-1"></i></a>
                        </div>
                    </div>
                    <div class="showcase-card reveal-up" data-reveal-delay="0.4">
                        <img src="https://placehold.co/600x400/047857/FFFFFF?text=SecureNet+Global" alt="SecureNet Global">
                         <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">SecureNet Global: Cybersecurity</h3>
                            <p class="text-text-secondary text-sm mb-4">Overhauled cybersecurity infrastructure for a healthcare provider, achieving 99.9% threat detection.</p>
                            <a href="contact.html" class="font-semibold text-accent hover:underline">Learn More <i class="fas fa-angle-right ml-1"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <footer class="bg-accent py-12">
        <div class="container mx-auto text-center text-text-primary">
            <p>© <script>document.write(new Date().getFullYear())</script> D-K Solutions. All rights reserved.</p>
            <p class="text-sm mt-2">Innovating for a Smarter Future. Powered by Ingenuity.</p>
        </div>
    </footer>

    <a href="https://wa.me/254742007277" id="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Chat with us on WhatsApp" title="Chat with us on WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

<script>
document.addEventListener('DOMContentLoaded', () => {

    gsap.registerPlugin(ScrollTrigger, TextPlugin);
    const GEMINI_API_KEY = 'AIzaSyCOyiZkk8t7zFtX4zC9G4v66MPJfgjIi84'; // FAKE API Key
    const COMPANY_CONTACT_NUMBER = '+254742007277';

    const QUIZ_DATA = [
        {
            question: "Which broad area are you seeking solutions for, or which service type are you most interested in?",
            options: ["AI & Intelligent Automation", "Custom Software Development (Web/Mobile/Enterprise)", "Cybersecurity & Data Protection", "Data Analytics & Business Intelligence", "Cloud Infrastructure & DevOps", "Digital Transformation & Strategy Consulting"],
            promptKey: "serviceArea"
        },
        { question: "What is your primary business objective related to this area?", options: ["Increase revenue/growth", "Reduce operational costs", "Enhance customer experience", "Improve decision-making", "Launch a new product/service", "Mitigate risks & ensure compliance"], promptKey: "objective" },
        { question: "What is your biggest current challenge in this chosen area?", options: ["Lack of technical expertise/resources", "Outdated or inefficient existing systems", "Data management, quality, or security concerns", "Difficulty integrating new technologies", "Keeping up with market changes and competition", "Budget limitations for desired solutions"], promptKey: "challenge" },
        { question: "What specific outcome or improvement are you hoping to achieve with our help?", options: ["Automate specific manual or repetitive processes", "Develop a new platform, application, or digital tool", "Significantly strengthen current security posture", "Gain actionable insights from available data", "Modernize IT infrastructure for better performance/scalability", "Define a clear strategic digital roadmap for the future"], promptKey: "desiredOutcome" }
    ];
    let userQuizAnswers = {};

    async function initializePage() {
        populateQuiz();
        loadLottieAnimations(); // Consolidated Lottie loading
        animateHeroText();
        
        const asyncOperations = [loadParticles()];
        
        try {
            await Promise.all(asyncOperations.map(p => p.catch(err => console.error("A non-critical async task failed:", err))));
        } catch (error) {
            console.error("Error during Promise.all for async operations:", error);
        } finally {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                gsap.to(loadingOverlay, { 
                    opacity: 0, 
                    duration: 0.7, 
                    onComplete: () => {
                        loadingOverlay.style.display = 'none';
                        gsap.to('body', { opacity: 1, duration: 0.5 });
                        setupScrollTriggers();
                        initializeSearch();
                        setupPageTransitions();
                        initializeMobileMenu();
                        setupHeaderScroll();
                        initializeDarkMode();
                        initializeGeminiCustomerCare();
                    } 
                });
            } else {
                gsap.to('body', { opacity: 1, duration: 0.5 });
                setupScrollTriggers(); /* ... other initializers */ initializeGeminiCustomerCare();
            }
        }
    }
    
    function loadLottieAnimations() {
        const lottieLoadingContainer = document.getElementById('lottie-loading');
        if (lottieLoadingContainer) {
            lottie.loadAnimation({ container: lottieLoadingContainer, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets9.lottiefiles.com/packages/lf20_fh7O5N6N2b.json' });
        }

        const heroLottieContainer = document.getElementById('hero-lottie-animation');
        if (heroLottieContainer) {
            lottie.loadAnimation({ container: heroLottieContainer, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets3.lottiefiles.com/packages/lf20_x9hfm2jp.json' });
            document.body.addEventListener('mousemove', (e) => {
                const moveX = (e.clientX / window.innerWidth - 0.5) * 30;
                const moveY = (e.clientY / window.innerHeight - 0.5) * 30;
                gsap.to(heroLottieContainer, { x: moveX, y: moveY, rotation: moveX * 0.05, duration: 0.8, ease: 'power1.out' });
            });
        }
        
        // Philosophy Lotties
        const philInnovation = document.getElementById('lottie-philosophy-innovation');
        if(philInnovation) lottie.loadAnimation({ container: philInnovation, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets2.lottiefiles.com/packages/lf20_v92o76EAX9.json' }); // Idea bulb / Innovation
        const philClient = document.getElementById('lottie-philosophy-client');
        if(philClient) lottie.loadAnimation({ container: philClient, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets1.lottiefiles.com/packages/lf20_kylpcnql.json'}); // Handshake / Partnership
        const philIntegrity = document.getElementById('lottie-philosophy-integrity');
        if(philIntegrity) lottie.loadAnimation({ container: philIntegrity, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets8.lottiefiles.com/packages/lf20_k2397ggr.json' }); // Shield / Trust

        // Innovation Lotties
        const innovRD = document.getElementById('lottie-innovation-rd');
        if(innovRD) lottie.loadAnimation({ container: innovRD, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets5.lottiefiles.com/packages/lf20_xwhnpqyv.json' }); // Scientist / Research
        const innovLearning = document.getElementById('lottie-innovation-learning');
        if(innovLearning) lottie.loadAnimation({ container: innovLearning, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets1.lottiefiles.com/packages/lf20_aacw0wgj.json' }); // Book / Learning
        const innovLabs = document.getElementById('lottie-innovation-labs');
        if(innovLabs) lottie.loadAnimation({ container: innovLabs, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets6.lottiefiles.com/packages/lf20_0yfsb3a1.json' }); // Rocket / Experiment

        // Gemini AI Assistant Lotties
        const geminiAvatar = document.getElementById('lottie-gemini-avatar');
        if(geminiAvatar) lottie.loadAnimation({ container: geminiAvatar, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets5.lottiefiles.com/packages/lf20_mzbdc0qk.json' }); // Friendly AI face
        const geminiThinking = document.getElementById('lottie-gemini-thinking');
        if(geminiThinking) lottie.loadAnimation({ container: geminiThinking, renderer: 'svg', loop: true, autoplay: true, path: 'https://assets5.lottiefiles.com/packages/lf20_vnikrcia.json'}); // AI Brain processing
    }

    function setupPageTransitions() {
        document.querySelectorAll('a.nav-link, a.hero-cta-button, .expertise-link-btn, .showcase-card a').forEach(link => {
            const href = link.getAttribute('href');
            if (href && (href.includes('.html') || href.startsWith('#')) && !link.hasAttribute('target')) {
                // Ensure # links on the same page don't trigger full page fade
                if (href.startsWith('#') && window.location.pathname.endsWith(link.pathname)) {
                    // This is a hash link on the current page, let default behavior handle smooth scroll
                    return;
                }
                 if (href.includes('.html')) { // Only fade for different pages
                    link.addEventListener('click', e => {
                        e.preventDefault();
                        gsap.to('body', { opacity: 0, duration: 0.4, ease: 'power1.in', onComplete: () => { window.location.href = href; }});
                    });
                 }
            }
        });
    }

    function animateHeroText() {
        const headline = document.getElementById('hero-headline');
        if (!headline) return;
        const textToType = "Architecting <span class='gradient-text'>Intelligent Futures</span><span class='cursor'>|</span>";
        gsap.to(headline, {
            duration: 3, text: { value: textToType, newClass:"gradient-text"}, ease: "none",
            onComplete: () => { const cursor = headline.querySelector('.cursor'); if(cursor) cursor.style.animationPlayState = 'paused';}
        });
    }

    function populateQuiz() {
        const questionsContainer = document.getElementById('quiz-questions');
        if (!questionsContainer) return;
        let questionsHTML = QUIZ_DATA.map((q, index) => `
            <div class="mb-6 reveal-up" data-question-index="${index}">
                <h4 class="font-semibold text-lg mb-3">${index + 1}. ${q.question}</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    ${q.options.map(opt => `<div class="quiz-option" data-value="${opt}">${opt}</div>`).join('')}
                </div>
            </div>`).join('');
        questionsContainer.innerHTML = questionsHTML;
        document.querySelectorAll('.quiz-option').forEach(option => option.addEventListener('click', handleQuizOptionSelect));
    }

    function handleQuizOptionSelect(e) {
        const selectedOption = e.currentTarget;
        const questionDiv = selectedOption.closest('[data-question-index]');
        questionDiv.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
        selectedOption.classList.add('selected');
        userQuizAnswers[QUIZ_DATA[parseInt(questionDiv.dataset.questionIndex)].promptKey] = selectedOption.dataset.value;
        if (Object.keys(userQuizAnswers).length === QUIZ_DATA.length) triggerGeminiSolution();
    }
    
    async function triggerGeminiSolution() { /* Using 'Solution' to distinguish from care-bot */
        const resultContainer = document.getElementById('gemini-result-container');
        const spinner = document.getElementById('gemini-spinner');
        const contentDiv = document.getElementById('gemini-content');
        
        resultContainer.classList.remove('hidden');
        contentDiv.classList.add('hidden');
        spinner.classList.remove('hidden');
        
        const userPrompt = `Based on: Area/Service: ${userQuizAnswers.serviceArea}, Objective: ${userQuizAnswers.objective}, Challenge: ${userQuizAnswers.challenge}, Outcome: ${userQuizAnswers.desiredOutcome}. Generate a concise, high-level, preliminary solution blueprint (Core Strategy, Tech Stack (illustrative), First Steps). Use Markdown (H3 for titles, bullets). Be professional, insightful, encouraging.`;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_API_KEY}`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: userPrompt }] }] })
            });
            if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
            const data = await response.json();
            displayGeminiResult(data.candidates[0].content.parts[0].text);
        } catch (error) {
            console.warn("Gemini Solution API failed. Using mock response.", error.message);
            setTimeout(() => displayGeminiResult(generateMockGeminiResponse(userQuizAnswers)), 1500);
        }
    }

    function displayGeminiResult(markdownContent) { // Assuming markdown for this one now.
        const spinner = document.getElementById('gemini-spinner');
        const contentDiv = document.getElementById('gemini-content');
        spinner.classList.add('hidden');
        // Simple Markdown to HTML conversion for H3 and lists
        let htmlContent = markdownContent
            .replace(/### (.*)/g, '<h3 class="text-lg font-semibold mt-3 mb-1">$1</h3>')
            .replace(/\* (.*)/g, '<li class="ml-4 list-disc">$1</li>')
            .replace(/\n/g, '<br>');
        // Wrap lists in <ul>
        htmlContent = htmlContent.replace(/(<li.*<\/li>)/gs, '<ul>$1</ul>');
        htmlContent = htmlContent.replace(/<\/ul><br><ul>/g, ''); // Fix adjacent ul tags due to line breaks

        contentDiv.innerHTML = `<div class="prose prose-sm max-w-none dark:prose-invert">${htmlContent}</div>`;
        contentDiv.classList.remove('hidden');
        gsap.from(contentDiv, { opacity: 0, y: 20, duration: 0.5 });
    }
    
    function generateMockGeminiResponse(answers) {
        let { serviceArea, objective, challenge, desiredOutcome } = answers;
        return `### Core Strategy: Tailored for ${serviceArea}
* Focus on leveraging technology to achieve ${objective}, overcome ${challenge}, and deliver ${desiredOutcome}.
* We'll emphasize agile methodologies for rapid iteration and value delivery.

### Recommended Technology Stack (Illustrative Examples)
* **Backend:** Python (Django/FastAPI) or Node.js (Express) for robust APIs.
* **Frontend:** React (Next.js) or Vue.js for dynamic user interfaces.
* **Database:** PostgreSQL for relational data, MongoDB for flexibility.
* **Cloud:** AWS or Azure for scalable infrastructure.
* **AI/ML (if applicable for ${serviceArea}):** TensorFlow, PyTorch, scikit-learn.

### First Steps (Initial 2-4 Weeks)
* **Deep Dive Workshop:** Understand your specific needs within ${serviceArea}.
* **Scope Definition & Prototyping:** Outline key features and create initial mockups.
* **Technical Architecture Design:** Finalize tech stack and system design.
* **Sprint 0 & Setup:** Prepare development environment and initial backlog.`;
    }

    // --- GEMINI CUSTOMER CARE ---
    function initializeGeminiCustomerCare() {
        const chatbox = document.getElementById('gemini-chatbox');
        const input = document.getElementById('gemini-care-input');
        const submitBtn = document.getElementById('gemini-care-submit');
        const thinkingLottie = document.getElementById('lottie-gemini-thinking');
        const feedbackDiv = document.getElementById('gemini-care-feedback');

        const appendMessage = (text, type) => {
            const msgDiv = document.createElement('div');
            msgDiv.classList.add('chat-message', type === 'user' ? 'user-message' : 'gemini-message');
            msgDiv.textContent = text;
            chatbox.appendChild(msgDiv);
            chatbox.scrollTop = chatbox.scrollHeight; // Auto-scroll
        };

        const showDissatisfiedOption = () => {
            feedbackDiv.innerHTML = ''; // Clear previous
            const btn = document.createElement('button');
            btn.id = 'gemini-dissatisfied-btn';
            btn.innerHTML = 'Not quite what I needed <i class="far fa-frown ml-1"></i>';
            btn.onclick = () => {
                appendMessage(`I understand. For more personalized assistance, please contact us directly at ${COMPANY_CONTACT_NUMBER}. Our human experts are ready to help!`, 'gemini');
                feedbackDiv.innerHTML = `<p class="text-sm text-text-secondary">We've noted your feedback. Please call us at <strong class="text-accent">${COMPANY_CONTACT_NUMBER}</strong>.</p>`;
            };
            feedbackDiv.appendChild(btn);
        };
        
        const handleCareSubmit = async () => {
            const userText = input.value.trim();
            if (!userText) return;
            appendMessage(userText, 'user');
            input.value = '';
            thinkingLottie.classList.remove('hidden');
            feedbackDiv.innerHTML = ''; // Clear old feedback

            // Simulate API call and mock response
            setTimeout(() => {
                thinkingLottie.classList.add('hidden');
                let geminiResponseText;
                if (userText.toLowerCase().includes("price") || userText.toLowerCase().includes("cost") || userText.toLowerCase().includes("quote")) {
                    geminiResponseText = `For detailed pricing or a quote, it's best to discuss your specific project requirements. I can arrange for one of our specialists to contact you, or you can reach us at ${COMPANY_CONTACT_NUMBER}. What would you prefer?`;
                } else if (userText.toLowerCase().includes("services")) {
                    geminiResponseText = "We offer a range of services including AI & Intelligent Automation, Custom Software Development, Cybersecurity, Data Analytics, Cloud Solutions, and Digital Transformation consulting. Can I provide more details on a specific area?";
                } else if (userText.toLowerCase().includes("hello") || userText.toLowerCase().includes("hi")) {
                    geminiResponseText = "Hello there! How can I assist you further today?";
                } else {
                    geminiResponseText = "Thanks for your question! While I'm still learning, for detailed inquiries it's often best to speak with a human expert. I can provide general information, or would you like to know how to contact us directly?";
                }
                appendMessage(geminiResponseText, 'gemini');
                showDissatisfiedOption();
            }, 1500 + Math.random() * 1000);
        };

        submitBtn.addEventListener('click', handleCareSubmit);
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleCareSubmit();
        });
    }


    // --- SCROLL & UI ---
     function setupScrollTriggers() {
        gsap.utils.toArray('.reveal-up').forEach(elem => {
            gsap.fromTo(elem, { y: 60, autoAlpha: 0 }, {
                duration: 1.2, y: 0, autoAlpha: 1, ease: 'power3.out',
                scrollTrigger: { trigger: elem, start: 'top 90%', end: "bottom 60%", toggleActions: 'play none none reset' },
                delay: parseFloat(elem.dataset.revealDelay) || 0
            });
        });
    }

    function setupHeaderScroll() {
        const header = document.getElementById('main-header');
        if (!header) return;
        ScrollTrigger.create({
            trigger: "body", start: "top top-=" + (header.offsetHeight + 10),
            onUpdate: self => header.classList.toggle('scrolled', self.direction === 1 && self.scroll() > 50),
            onLeaveBack: () => header.classList.remove('scrolled'), // when scrolling back to top
            onEnter: () => { if(window.scrollY > 50) header.classList.add('scrolled');}
        });
    }
    
    function initializeMobileMenu() {
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        if (menuButton && mobileMenu) {
            menuButton.addEventListener('click', () => {
                const isHidden = mobileMenu.classList.toggle('hidden');
                menuButton.querySelector('i').className = isHidden ? 'fas fa-bars fa-lg' : 'fas fa-times fa-lg';
                 gsap.fromTo(mobileMenu, { maxHeight: isHidden ? '500px' : 0, opacity: isHidden ? 1: 0 }, { maxHeight: isHidden ? 0 : '500px', opacity: isHidden ? 0 : 1, duration: 0.3, ease: 'power2.inOut'});
            });
        }
    }

    function initializeDarkMode() {
        const toggles = [document.getElementById('darkModeToggle'), document.getElementById('darkModeToggleMobile')];
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        let isCurrentlyDark = localStorage.getItem('darkMode') === 'true' || (!localStorage.getItem('darkMode') && prefersDark);

        const applyTheme = (dark) => {
            document.body.classList.toggle('dark-mode', dark);
            document.body.classList.toggle('light-mode', !dark);
            toggles.forEach(t => t && (t.checked = dark));
            if(typeof tsParticles !== 'undefined') tsParticles.load({ id:"tsparticles-hero", options: getParticlesConfig()});
            localStorage.setItem('darkMode', dark);
        }
        applyTheme(isCurrentlyDark);

        toggles.forEach(toggle => {
            if (toggle) toggle.addEventListener('change', (e) => applyTheme(e.target.checked));
        });
    }
    
    async function loadParticles() {
        if(typeof tsParticles !== 'undefined') {
           await tsParticles.load({ id: "tsparticles-hero", options: getParticlesConfig() });
        } else { console.warn("tsParticles not loaded."); }
    }
    
    function getParticlesConfig() {
        const isDark = document.body.classList.contains('dark-mode');
        return {"fpsLimit":60,"interactivity":{"events":{"onHover":{"enable":true,"mode":"grab"},"resize":true},"modes":{"grab":{"distance":140,"links":{"opacity":0.8,"color":isDark ? "#556677" : "#aabbcc"}}}},"particles":{"color":{"value":isDark ? "#4b5563":"#9ca3af"},"links":{"color":isDark ? "#374151":"#d1d5db","distance":150,"enable":true,"opacity":0.4,"width":1},"move":{"direction":"none","enable":true,"outModes":{"default":"bounce"},"random":true,"speed":1.2,"straight":false},"number":{"density":{"enable":true,"area":900},"value":70},"opacity":{"value":{"min":0.2,"max":0.6}},"shape":{"type":"circle"},"size":{"value":{"min":1,"max":4}}},"detectRetina":true};
    }
    
    function initializeSearch() {
        const searchInput = document.getElementById('search-input');
        if (!searchInput) return;
        const sections = document.querySelectorAll('.searchable-section');
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            sections.forEach(section => {
                const searchIndex = (section.dataset.searchIndex || "").toLowerCase();
                const isMatch = query === "" || searchIndex.includes(query);
                gsap.to(section, { opacity: isMatch ? 1 : 0.2, duration: 0.3, onComplete: () => section.classList.toggle('is-hidden', !isMatch) });
            });
        });
    }

    initializePage();
});
</script>

</body>
</html>